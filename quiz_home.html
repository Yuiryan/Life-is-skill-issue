<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shiro – Quiz Modes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;700&display=swap">
    <link rel="stylesheet" href="assets/ui.css">
    <script src="assets/ui.js" defer></script>
    <script>
        (function () {
            try {
                const savedTheme = localStorage.getItem('shiroTheme');
                if (savedTheme === 'dark') {
                    document.documentElement.classList.add('theme-dark');
                }
            } catch (err) {
                /* ignore */
            }
        })();
    </script>
    <style>
        :root {
            color-scheme: light;
            --bg-color: #f9fafb;
            --text-color: #111827;
            --nav-bg: #ffffff;
            --nav-border: #e5e7eb;
            --nav-button: #6b7280;
            --nav-button-hover: #111827;
            --card-bg: #ffffff;
            --card-shadow: 0 16px 40px rgba(15,23,42,0.08);
            --subtitle-color: #6b7280;
            --muted-color: #4b5563;
            --meta-color: #9ca3af;
            --badge-easy-bg: #ecfdf3;
            --badge-easy-text: #166534;
            --badge-medium-bg: #eff6ff;
            --badge-medium-text: #1d4ed8;
            --badge-hard-bg: #fef2f2;
            --badge-hard-text: #b91c1c;
            --modal-bg: #ffffff;
            --modal-text: #0f172a;
            --modal-body: #475569;
            --btn-secondary-border: #e5e7eb;
            --theme-toggle-bg: rgba(15,23,42,0.08);
            --theme-toggle-color: #0f172a;
            --theme-toggle-border: rgba(15,23,42,0.13);
        }

        .theme-dark {
            color-scheme: dark;
            --bg-color: #020617;
            --text-color: #e2e8f0;
            --nav-bg: rgba(2,6,23,0.85);
            --nav-border: #1e293b;
            --nav-button: #cbd5f5;
            --nav-button-hover: #ffffff;
            --card-bg: rgba(15,23,42,0.85);
            --card-shadow: 0 18px 48px rgba(2,6,23,0.65);
            --subtitle-color: #94a3b8;
            --muted-color: #cbd5f5;
            --meta-color: #94a3b8;
            --badge-easy-bg: rgba(34,197,94,0.18);
            --badge-easy-text: #4ade80;
            --badge-medium-bg: rgba(59,130,246,0.18);
            --badge-medium-text: #93c5fd;
            --badge-hard-bg: rgba(248,113,113,0.18);
            --badge-hard-text: #fca5a5;
            --modal-bg: rgba(15,23,42,0.95);
            --modal-text: #e2e8f0;
            --modal-body: #cbd5f5;
            --btn-secondary-border: rgba(148,163,184,0.35);
            --theme-toggle-bg: rgba(15,23,42,0.6);
            --theme-toggle-color: #f8fafc;
            --theme-toggle-border: rgba(248,250,252,0.2);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.25s ease, color 0.25s ease;
        }

        /* NAVBAR */
        .navbar {
            border-bottom: 1px solid var(--nav-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 clamp(16px, 5vw, 56px);
            height: clamp(64px, 10vw, 80px);
            background: var(--nav-bg);
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .nav-left img {
            height: clamp(48px, 9vw, 80px);
            width: clamp(48px, 9vw, 80px);
            object-fit: contain;
        }

        .brand-name {
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: clamp(20px, 2.6vw, 28px);
            letter-spacing: -1px;
        }

        .nav-right {
            font-size: 14px;
            font-weight: 500;
            color: var(--nav-button);
            cursor: pointer;
        }

        .nav-right:hover {
            color: var(--nav-button-hover);
        }

        /* MAIN */
        .main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: clamp(24px, 6vw, 84px) clamp(16px, 5vw, 48px);
        }

        .container {
            max-width: 960px;
            width: min(100%, 960px);
        }

        .page-title {
            font-size: clamp(22px, 4vw, 30px);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 14px;
            color: var(--subtitle-color);
            margin-bottom: 24px;
        }

        .mode-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: clamp(16px, 3vw, 24px);
        }

        .mode-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 24px 20px;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 280px;
            gap: 12px;
        }

        .mode-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .mode-desc {
            font-size: 13px;
            color: var(--muted-color);
            margin-bottom: 16px;
            min-height: 60px;
        }

        .mode-meta {
            font-size: 12px;
            color: var(--meta-color);
            margin-bottom: 12px;
        }

        .btn-start {
            border: none;
            border-radius: 999px;
            padding: 10px 0;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            background: #22c55e;
            color: #ffffff;
            box-shadow: 0 10px 24px rgba(34,197,94,0.35);
            --hover-shadow: 0 16px 32px rgba(34,197,94,0.45);
            --active-shadow: 0 8px 18px rgba(34,197,94,0.35);
        }

        .btn-start:hover {
            background: #16a34a;
        }

        .badge {
            display: inline-block;
            border-radius: 999px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .badge-easy {
            background: var(--badge-easy-bg);
            color: var(--badge-easy-text);
        }

        .badge-medium {
            background: var(--badge-medium-bg);
            color: var(--badge-medium-text);
        }

        .badge-hard {
            background: var(--badge-hard-bg);
            color: var(--badge-hard-text);
        }

        @media (max-width: 800px) {
            .mode-grid {
                grid-template-columns: 1fr;
            }

            .navbar {
                flex-direction: column;
                gap: 8px;
                height: auto;
                padding: 16px;
            }
        }
        /* Modal / pop-up styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.45);
            z-index: 1200;
            padding: 20px;
        }

        .modal-overlay.open {
            display: flex;
        }

        .modal {
            background: var(--modal-bg);
            border-radius: 12px;
            max-width: 720px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(2,6,23,0.35);
            padding: 20px 22px;
            color: var(--modal-text);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 8px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
        }

        .modal-body {
            font-size: 14px;
            color: var(--modal-body);
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--btn-secondary-border);
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        } 

        .btn-primary {
            background: #2563eb;
            color: #fff;
            border: none;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
        }

        .theme-toggle {
            position: fixed;
            bottom: 18px;
            right: 18px;
            border-radius: 999px;
            border: 1px solid var(--theme-toggle-border);
            background: var(--theme-toggle-bg);
            color: var(--theme-toggle-color);
            padding: 8px 14px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            z-index: 1400;
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            transition: transform 0.2s ease, background 0.2s ease;
        }

        .theme-toggle:hover {
            transform: translateY(-1px);
        }

        @media (max-width: 640px) {
            .theme-toggle {
                bottom: 16px;
                right: 16px;
            }
        }
    </style>
</head>
<body>
<header class="navbar">
    <div class="nav-left">
        <img src="assets/logo.png" alt="Shiro logo">
        <div class="brand-name">Shiro</div>
    </div>
    <button type="button" class="nav-right" id="btn-logout">
        Return
    </button>
</header>

<button type="button" class="theme-toggle" id="theme-toggle">
    <span id="theme-toggle-label">Dark mode</span>
</button>

<main class="main">
    <div class="container">
        <div class="page-title" id="page-title">
            Choose your quiz mode
        </div>
        <div class="page-subtitle" id="page-subtitle">
            Start with an easy warm-up, then challenge yourself with harder levels.
        </div>

        <div class="mode-grid">
            <!-- EASY -->
            <div class="mode-card">
                <div>
                    <div class="badge badge-easy" id="badge-easy">Easy</div>
                    <div class="mode-name" id="mode-easy-title">Easy mode</div>
                    <div class="mode-desc" id="mode-easy-desc">
                        Fewer questions, obvious AI clues, nhiều ví dụ rõ ràng để bạn làm quen với cách nhận diện.
                    </div>
                    <div class="mode-meta" id="mode-easy-meta">
                        10 questions • recommended for first-time users
                    </div>
                </div>
                <button type="button" class="btn-start" id="btn-easy">
                    Start Easy mode
                </button>
            </div>

            <!-- MEDIUM -->
            <div class="mode-card">
                <div>
                    <div class="badge badge-medium" id="badge-medium">Medium / Vừa</div>
                    <div class="mode-name" id="mode-medium-title">Medium mode</div>

                    <div class="mode-desc" id="mode-medium-desc">
                        Câu hỏi đa dạng hơn, dấu hiệu AI tinh tế hơn. Phù hợp khi bạn đã quen với mức dễ.
                    </div>
                    <div class="mode-meta" id="mode-medium-meta">
                        10 questions • mixed difficulty
                    </div>
                </div>
                <button type="button" class="btn-start" id="btn-medium">
                    Start Medium mode
                </button>
            </div>

            <!-- HARD -->
            <div class="mode-card">
                <div>
                    <div class="badge badge-hard" id="badge-hard">Hard / Khó</div>
                    <div class="mode-name" id="mode-hard-title">Hard mode</div>
                    <div class="mode-desc" id="mode-hard-desc">
                        Ảnh thật và ảnh AI rất khó phân biệt, cần quan sát cực kỹ. Thử thách dành cho “cao thủ”.
                    </div>
                    <div class="mode-meta" id="mode-hard-meta">
                        10 questions • advanced difficulty
                    </div>
                </div>
                <button type="button" class="btn-start" id="btn-hard">
                    Start Hard mode
                </button>
            </div>
        </div>
    </div>
</main>

<!-- Welcome modal shown only on first visit -->
<div class="modal-overlay" id="welcome-modal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="welcome-title">
        <div class="modal-header">
            <div class="modal-title" id="welcome-title">Welcome to Shiro</div>
        </div>
        <div class="modal-body" id="welcome-body">
            <p id="welcome-body-para1">Thanks for visiting! Currently this site only serves to test basic functions for the purpose of implementing quizzes that checks users' ability in detecting authenticity of a photo - that is, whether an image was generated with the usage of Generative AI or not.</p>
            <p id="welcome-body-para2">This is an amateur project by a small team of students from class <em>CN01</em>, for course <em>CO2001: Professional Skills for Engineers</em> of <em>Ho Chi Minh City University of Technology (HCMUT)</em></p>
        </div>
        <div class="modal-actions">
            <button type="button" class="btn-primary" id="modal-ok">Got it</button>
        </div>
    </div>
</div>

<script>
    const THEME_STORAGE_KEY = "shiroTheme";
    const themeToggleBtn = document.getElementById("theme-toggle");
    const themeToggleLabel = document.getElementById("theme-toggle-label");

    function applyThemePreference(theme) {
        if (theme === "dark") {
            document.documentElement.classList.add("theme-dark");
        } else {
            document.documentElement.classList.remove("theme-dark");
        }

        if (themeToggleLabel) {
            themeToggleLabel.textContent = theme === "dark" ? "Light mode" : "Dark mode";
        }
    }

    (function initTheme() {
        let storedTheme = null;
        try {
            storedTheme = localStorage.getItem(THEME_STORAGE_KEY);
        } catch (err) {
            storedTheme = null;
        }

        let resolvedTheme = storedTheme;
        if (!resolvedTheme) {
            const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
            resolvedTheme = prefersDark ? "dark" : "light";
        }

        applyThemePreference(resolvedTheme);

        if (!storedTheme) {
            try {
                localStorage.setItem(THEME_STORAGE_KEY, resolvedTheme);
            } catch (err) {
                /* ignore */
            }
        }
    })();

    themeToggleBtn?.addEventListener("click", () => {
        const nextTheme = document.documentElement.classList.contains("theme-dark") ? "light" : "dark";
        applyThemePreference(nextTheme);
        try {
            localStorage.setItem(THEME_STORAGE_KEY, nextTheme);
        } catch (err) {
            /* ignore */
        }
    });

    if (typeof window.matchMedia === "function") {
        const mq = window.matchMedia("(prefers-color-scheme: dark)");
        const listener = (event) => {
            let storedTheme = null;
            try {
                storedTheme = localStorage.getItem(THEME_STORAGE_KEY);
            } catch (err) {
                storedTheme = null;
            }
            if (storedTheme) return;
            applyThemePreference(event.matches ? "dark" : "light");
        };

        if (mq.addEventListener) {
            mq.addEventListener("change", listener);
        } else if (mq.addListener) {
            mq.addListener(listener);
        }
    }

    // Logout -> quay về trang chính
    document.getElementById("btn-logout").addEventListener("click", () => {
        window.location.href = "index.html";
    });

    // Điều hướng 3 mode sang 3 trang quiz
    document.getElementById("btn-easy").addEventListener("click", () => {
        window.location.href = "quiz_easy.html";
    });

    document.getElementById("btn-medium").addEventListener("click", () => {
        window.location.href = "quiz_medium.html";
    });

    document.getElementById("btn-hard").addEventListener("click", () => {
        window.location.href = "quiz_hard.html";
    });

    // ===== ĐA NGÔN NGỮ =====
    const quizTranslations = {
        en: {
            logout: "Return",
            pageTitle: "Choose your life path",
            pageSubtitle: "Those chickens will never understand",

            welcomeTitle: "Welcome to Shiro",
            welcomeParagraph1: "Thanks for visiting! Currently this site only serves to test basic functions for the purpose of implementing quizzes that check your ability to detect whether a photo was created with Generative AI or not.",
            welcomeParagraph2: "This is an amateur project by a small team of students from class <em>CN01</em>, for course <em>CO2001: Professional Skills for Engineers</em> of <em>Ho Chi Minh City University of Technology (HCMUT)</em>.",
            welcomeCTA: "Got it",

            badgeEasy: "Easy",
            badgeMedium: "Medium",
            badgeHard: "Hard",
            easyTitle: "Easy mode",
            easyDesc: "Caughing baby vs Hydrogen Bomb (you)",
            easyMeta: "10 questions",
            easyButton: "Start",

            mediumTitle: "Medium mode",
            mediumDesc: "J97 vs Hieuthunhat",
            mediumMeta: "Still 10 questions",
            mediumButton: "Start",

            hardTitle: "Hard mode",
            hardDesc: "Gojo vs Sukuna",
            hardMeta: "Ofc 10 questions",
            hardButton: "Start"
        },
        vi: {
            logout: "Quay lại",
            pageTitle: "Chọn chế độ quiz",
            pageSubtitle: "Đế vương phải có long ngai, mấy con gà thì biết gì",

            welcomeTitle: "Chào mừng đến với Shiro",
            welcomeParagraph1: "Cảm ơn bạn đã ghé thăm! Trang này hiện chỉ dùng để thử nghiệm các chức năng cơ bản của bộ câu hỏi giúp người chơi luyện khả năng nhận biết ảnh thật so với ảnh được tạo bởi Generative AI.",
            welcomeParagraph2: "Đây là dự án tự làm của một nhóm sinh viên lớp <em>CN01</em>, thuộc học phần <em>CO2001: Professional Skills for Engineers</em> của <em>trường Đại học Bách khoa - ĐHQG-HCM (HCMUT)</em>.",
            welcomeCTA: "Đã rõ",

            badgeEasy: "Dễ",
            badgeMedium: "Vừa",
            badgeHard: "Khó",

            easyTitle: "Dễ",
            easyDesc: "Vừa làm vừa trông cậu vàng còn được",
            easyMeta: "10 câu",
            easyButton: "Bắt đầu",

            mediumTitle: "Vừa",
            mediumDesc: "Khuyến nghị ngồi xe lăn để làm. Chưa chắc manten nhưng chắc chắn sẽ bị gọi là Tê liệt",
            mediumMeta: "Vẫn là 10 câu",
            mediumButton: "Bắt đầu",

            hardTitle: "Khó",
            hardDesc: "Khó nhưng thú vị",
            hardMeta: "10 câu",
            hardButton: "Bắt đầu"
        },
        jp: {
            logout: "返す",
            pageTitle: "クイズモードを選択",
            pageSubtitle: "私の人生について何をしていますか",

            welcomeTitle: "Shiro へようこそ",
            welcomeParagraph1: "ご訪問いただきありがとうございます。このサイトは、ある写真が生成AIで作られたものかどうかを見分けるクイズ機能を試すためのデモ版です。",
            welcomeParagraph2: "このプロジェクトは、<em>ホーチミン市工科大学 (HCMUT)</em> の <em>CO2001: Professional Skills for Engineers</em> 講義に所属する <em>CN01</em> クラスの学生チームによる自主制作です。",
            welcomeCTA: "了解",

            badgeEasy: "やさしい",
            badgeMedium: "ふつう",
            badgeHard: "むずかしい",

            easyTitle: "やさしい",
            easyDesc: "15分漢字テスト似ている",
            easyMeta: "10 問含まれて",
            easyButton: "始める",

            mediumTitle: "ふつう",
            mediumDesc: "ういあういあういあういあ",
            mediumMeta: "10 問含まれて",
            mediumButton: "始める",

            hardTitle: "むずかしい",
            hardDesc: "むずかしいですが、おもしろいです",
            hardMeta: "10 問含まれて",
            hardButton: "始める"
        }
    };

    function applyQuizLang(lang) {
        const t = quizTranslations[lang] || quizTranslations.en;

        document.getElementById("btn-logout").textContent  = t.logout;
        document.getElementById("page-title").textContent  = t.pageTitle;
        document.getElementById("page-subtitle").textContent = t.pageSubtitle;

        const welcomeTitle = document.getElementById("welcome-title");
        const welcomePara1 = document.getElementById("welcome-body-para1");
        const welcomePara2 = document.getElementById("welcome-body-para2");
        const welcomeCTA = document.getElementById("modal-ok");
        if (welcomeTitle) welcomeTitle.textContent = t.welcomeTitle;
        if (welcomePara1) welcomePara1.innerHTML = t.welcomeParagraph1;
        if (welcomePara2) welcomePara2.innerHTML = t.welcomeParagraph2;
        if (welcomeCTA) welcomeCTA.textContent = t.welcomeCTA;

        document.getElementById("badge-easy").textContent   = t.badgeEasy;
        document.getElementById("badge-medium").textContent = t.badgeMedium;
        document.getElementById("badge-hard").textContent   = t.badgeHard;

        document.getElementById("mode-easy-title").textContent = t.easyTitle;
        document.getElementById("mode-easy-desc").textContent  = t.easyDesc;
        document.getElementById("mode-easy-meta").textContent  = t.easyMeta;
        document.getElementById("btn-easy").textContent        = t.easyButton;

        document.getElementById("mode-medium-title").textContent = t.mediumTitle;
        document.getElementById("mode-medium-desc").textContent  = t.mediumDesc;
        document.getElementById("mode-medium-meta").textContent  = t.mediumMeta;
        document.getElementById("btn-medium").textContent        = t.mediumButton;

        document.getElementById("mode-hard-title").textContent = t.hardTitle;
        document.getElementById("mode-hard-desc").textContent  = t.hardDesc;
        document.getElementById("mode-hard-meta").textContent  = t.hardMeta;
        document.getElementById("btn-hard").textContent        = t.hardButton;
    }

    // đọc ngôn ngữ đã chọn từ index
    const savedLang = localStorage.getItem("shiroLang") || "en";
    applyQuizLang(savedLang);

    // --- Welcome modal: show once until the page is refreshed ---
    (function () {
        const SESSION_KEY = 'shiro_qhome_welcome_seen';
        const modalOverlay = document.getElementById('welcome-modal');
        const btnOk = document.getElementById('modal-ok');

        // If user explicitly reloads the page, allow the popup to reappear
        try {
            const navEntry = performance.getEntriesByType?.('navigation')?.[0];
            const navType = navEntry?.type || (performance.navigation?.type === 1 ? 'reload' : 'navigate');
            if (navType === 'reload') {
                sessionStorage.removeItem(SESSION_KEY);
            }
        } catch (err) {
            // Silently ignore performance/sessionStorage issues
        }

        function openModal() {
            if (!modalOverlay) return;
            modalOverlay.classList.add('open');
            modalOverlay.setAttribute('aria-hidden', 'false');
        }

        function closeModal() {
            if (!modalOverlay) return;
            modalOverlay.classList.remove('open');
            modalOverlay.setAttribute('aria-hidden', 'true');
            try {
                sessionStorage.setItem(SESSION_KEY, '1');
            } catch (err) {
                // ignore storage errors
            }
        }

        function shouldShowModal() {
            try {
                return !sessionStorage.getItem(SESSION_KEY);
            } catch (err) {
                return true;
            }
        }

        // Click outside modal to close (treat as remind later)
        if (modalOverlay) {
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });
        }

        if (btnOk) btnOk.addEventListener('click', closeModal);

        // Show modal once per session (until the user refreshes the page)
        if (shouldShowModal()) {
            window.requestAnimationFrame(() => setTimeout(openModal, 200));
        }
    })();
</script>
</body>
</html>
