<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shiro – Easy Quiz</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;700&display=swap">
    <link rel="stylesheet" href="assets/ui.css">
    <script src="assets/ui.js" defer></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        body {
            background: #f3f4f6;
            color: #111827;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            animation: pageFadeIn 0.4s ease-out;
        }

        @keyframes pageFadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* NAVBAR */
        .navbar {
            height: clamp(60px, 9vw, 72px);
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 clamp(16px, 4vw, 48px);
            background: #ffffff;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-left img {
            height: clamp(40px, 8vw, 64px);
            width: clamp(40px, 8vw, 64px);
            object-fit: contain;
        }

        .brand-name {
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: clamp(18px, 2.6vw, 24px);
        }

        .nav-right {
            font-size: 13px;
            color: #6b7280;
            cursor: pointer;
        }

        .nav-right:hover { color: #111827; }

        /* MAIN */
        .main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: clamp(16px, 5vw, 64px);
        }

        .card {
            background: #ffffff;
            color: #111827;
            border-radius: 24px;
            padding: clamp(20px, 4vw, 36px);
            max-width: 720px;
            width: min(100%, 720px);
            box-shadow: 0 20px 50px rgba(15,23,42,0.12);

            display: flex;
            flex-direction: column;
            align-items: stretch;

            animation: cardIn 0.35s ease-out;
        }

        @keyframes cardIn {
            from { opacity: 0; transform: scale(0.97); }
            to   { opacity: 1; transform: scale(1); }
        }

        .question-top-label {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 6px;
        }

        .definition {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 24px;
        }

        .question-image-box {
            display: flex;
            justify-content: center;
            margin-bottom: 18px;
        }

       .question-image-box img {
        width: min(320px, 80vw); /* co theo chiều rộng màn hình, max ~320px */
        aspect-ratio: 1 / 1;     /* giữ tỉ lệ vuông */
        object-fit: contain;     /* không cắt mất nội dung ảnh */
        border-radius: 16px;
        background: #f9fafb;
        }

        .answers-label {
            font-size: 13px;
            margin-bottom: 8px;
            color: #4b5563;
            text-align: center;
        }

        .answers-row {
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .answer-btn {
            flex: 0 0 40%;
            border-radius: 14px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            color: #111827;
            padding: 14px 16px;
            text-align: center;
            font-size: 14px;
            cursor: pointer;
            min-height: 56px;
            transition: background 0.15s ease, border-color 0.15s ease;
            --hover-shadow: 0 14px 28px rgba(15,23,42,0.08);
        }

        .answer-btn:hover {
            background: #e5f2ff;
            border-color: #93c5fd;
            transform: translateY(-1px);
        }

        .answer-btn.correct {
            background: #dcfce7;
            border-color: #22c55e;
        }

        .answer-btn.wrong {
            background: #fee2e2;
            border-color: #f97373;
        }

        .answer-btn:disabled {
            cursor: default;
            opacity: 0.95;
        }

        .feedback {
            margin-top: 14px;
            font-size: 14px;
            min-height: 20px;
            text-align: center;
        }

        .feedback.correct { color: #16a34a; }
        .feedback.wrong   { color: #dc2626; }

        .progress {
            margin-top: 4px;
            font-size: 12px;
            color: #6b7280;
            text-align: center;
        }

        .restart-btn {
            margin: 18px auto 0;
            border-radius: 999px;
            border: none;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            background: #22c55e;
            color: #ffffff;
            cursor: pointer;
            display: block;
            box-shadow: 0 10px 24px rgba(34,197,94,0.35);
            --hover-shadow: 0 16px 32px rgba(34,197,94,0.45);
        }

        .restart-btn:hover { background: #16a34a; }

        @media (max-width: 600px) {
            .navbar {
                flex-direction: column;
                gap: 8px;
                height: auto;
                padding: 16px;
            }

            .card { padding: 20px 16px 18px; border-radius: 20px; }
            .question-image-box img { width: 150px; height: 150px; }
            .answer-btn { flex: 1 1 100%; }
        }
    </style>
</head>
<body>
<header class="navbar">
    <div class="nav-left">
        <img src="assets/logo.png" alt="Shiro logo">
        <div class="brand-name">Shiro – Easy</div>
    </div>
    <button type="button" class="nav-right" id="btn-back-modes">
        Back to modes
    </button>
</header>

<main class="main">
    <div class="card" id="card">
        <div class="question-top-label" id="label-definition">Câu hỏi</div>
        <div class="definition" id="definition-text"></div>

        <div class="question-image-box">
            <img id="question-image" src="assets/q1.png" alt="illustration">
        </div>

        <div class="answers-label" id="label-choose">Hãy chọn đáp án</div>
        <div class="answers-row">
            <button type="button" class="answer-btn" id="ans-0"></button>
            <button type="button" class="answer-btn" id="ans-1"></button>
        </div>

        <div class="feedback" id="feedback"></div>
        <div class="progress" id="progress-text"></div>
    </div>
</main>

<script>
    // 10 câu – mỗi câu có vi/en/jp
    const questions = [
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.1.png",
            correct: 0
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.2.jpg",
            correct: 0
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.3.jpg",
            correct: 0
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.4.jpg",
            correct: 1
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.5.jpg",
            correct: 1
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.6.jpg",
            correct: 1
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.7.png",
            correct: 0
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.8.png",
            correct: 0
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.9.jpg",
            correct: 1
        },
        {
            vi: "Ảnh dưới là AI hay thật?",
            en: "Is the image below generated by AI or not?",
            jp: "下の写真は本物ですか、それともAIですか？",
            img: "assets/1.10.jpg",
            correct: 1
        }
    ];

    // UI đa ngôn ngữ + nhãn Có/Không / Yes/No / はい/いいえ
    const uiTexts = {
        en: {
            defLabel: "Question",
            chooseLabel: "Please choose an answer",
            back: "Back to modes",
            correct: "Correct!",
            wrong: "Incorrect.",
            yes: "AI",
            no: "Not AI",
            progress: (cur, total) => `Question ${cur} of ${total}`,
            finished: (s, t) => `Finished! You got ${s} / ${t} correct.`,
            restart: "Restart"
        },
        vi: {
            defLabel: "Câu hỏi",
            chooseLabel: "Hãy chọn đáp án",
            back: "Về chọn chế độ",
            correct: "Đúng rồi!",
            wrong: "Sai mất rồi...",
            yes: "AI",
            no: "Không phải AI",
            progress: (cur, total) => `Câu ${cur} / ${total}`,
            finished: (s, t) => `Hoàn thành! Bạn đúng ${s} / ${t} câu.`,
            restart: "Làm lại"
        },
        jp: {
            defLabel: "質問",
            chooseLabel: "答えを選んでください",
            back: "モード選択へ戻る",
            correct: "正解！",
            wrong: "不正解…",
            yes: "AI",
            no: "AIではない",
            progress: (cur, total) => `${total}問中 ${cur}問目`,
            finished: (s, tot) => `お疲れさま！ ${tot}問中${s}問正解しました。`,
            restart: "もう一度"
        }
    };

    const btnBack         = document.getElementById("btn-back-modes");
    const labelDefinition = document.getElementById("label-definition");
    const labelChoose     = document.getElementById("label-choose");
    const definitionText  = document.getElementById("definition-text");
    const feedbackEl      = document.getElementById("feedback");
    const progressText    = document.getElementById("progress-text");
    const imageEl         = document.getElementById("question-image");
    const cardEl          = document.getElementById("card");

    const answerButtons = [
        document.getElementById("ans-0"),
        document.getElementById("ans-1")
    ];

    let current = 0;
    let score   = 0;
    let locked  = false;
    let currentLang = "en";
    let t       = uiTexts.en;

    function applyLang(lang) {
        currentLang = lang;
        t = uiTexts[lang] || uiTexts.en;

        labelDefinition.textContent = t.defLabel;
        labelChoose.textContent     = t.chooseLabel;
        btnBack.textContent         = t.back;

        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[current];

        cardEl.style.animation = "none";
        void cardEl.offsetWidth;
        cardEl.style.animation = "cardIn 0.35s ease-out";

        const qText = q[currentLang] || q.vi;
        definitionText.textContent = qText;

        imageEl.src = q.img;
        imageEl.style.visibility = "visible";

        feedbackEl.textContent = "";
        feedbackEl.className   = "feedback";

        // nhãn Yes/No theo ngôn ngữ
        answerButtons[0].textContent = t.yes;
        answerButtons[1].textContent = t.no;

        answerButtons.forEach(btn => {
            btn.classList.remove("correct", "wrong");
            btn.disabled = false;
        });

        progressText.textContent = t.progress(current + 1, questions.length);
        locked = false;
    }

    function showResult() {
        definitionText.textContent = "";
        imageEl.style.visibility   = "hidden";
        labelChoose.textContent    = "";
        feedbackEl.textContent     = t.finished(score, questions.length);
        feedbackEl.className       = "feedback correct";
        progressText.textContent   = "";

        answerButtons.forEach(btn => btn.style.display = "none");

        // create action buttons: Restart + Back to modes (clears saved state)
        const actionsWrap = document.createElement("div");
        actionsWrap.style.display = "flex";
        actionsWrap.style.gap = "10px";
        actionsWrap.style.marginTop = "12px";

        const restartBtn = document.createElement("button");
        restartBtn.className = "restart-btn";
        restartBtn.type = "button";
        restartBtn.textContent = t.restart;
        restartBtn.addEventListener("click", () => location.reload());

        const backToModesBtn = document.createElement("button");
        backToModesBtn.className = "restart-btn";
        backToModesBtn.type = "button";
        backToModesBtn.textContent = t.back || "Back to modes";
        backToModesBtn.addEventListener("click", () => {
            clearState();
            window.location.href = "quiz_home.html";
        });

        actionsWrap.appendChild(restartBtn);
        actionsWrap.appendChild(backToModesBtn);
        cardEl.appendChild(actionsWrap);
    }

    function handleAnswer(index) {
        if (locked) return;
        locked = true;

        const q = questions[current];
        answerButtons.forEach(btn => btn.disabled = true);

        if (index === q.correct) {
            feedbackEl.textContent = t.correct;
            feedbackEl.className   = "feedback correct";
            answerButtons[index].classList.add("correct");
            score++;
        } else {
            feedbackEl.textContent = t.wrong;
            feedbackEl.className   = "feedback wrong";
            answerButtons[index].classList.add("wrong");
            answerButtons[q.correct].classList.add("correct");
        }

        setTimeout(() => {
            current++;
            if (current < questions.length) {
                renderQuestion();
            } else {
                showResult();
            }
        }, 900);
    }

    answerButtons.forEach((btn, idx) => {
        btn.addEventListener("click", () => handleAnswer(idx));
    });

    // --- resume/save state support ---
    const STORAGE_KEY = "shiroQuiz_easy";

    function saveState() {
        try {
            const payload = {
                current,
                score,
                currentLang
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
        } catch (e) { /* ignore storage errors */ }
    }

    function loadState() {
        try {
            const raw = localStorage.getItem(STORAGE_KEY);
            return raw ? JSON.parse(raw) : null;
        } catch (e) { return null; }
    }

    function clearState() {
        localStorage.removeItem(STORAGE_KEY);
    }

    // save when user intentionally navigates back to modes
    btnBack.addEventListener("click", () => {
        saveState();
        window.location.href = "quiz_home.html";
    });

    // also save on page unload (accidental close / reload)
    window.addEventListener("beforeunload", saveState);

    // when quiz finishes, clear saved progress
    const origShowResult = showResult;
    showResult = function() {
        clearState();
        origShowResult();
    };

    // resume prompt on load
    const saved = loadState();
    const savedLang = localStorage.getItem("shiroLang") || "en";
    if (saved && typeof saved.current === "number") {
        const ok = confirm("Resume previous quiz session?");
        if (ok) {
            current = saved.current;
            score = saved.score || 0;
            applyLang(saved.currentLang || savedLang);
        } else {
            clearState();
            applyLang(savedLang);
        }
    } else {
        applyLang(savedLang);
    }
</script>
</body>
</html>
